<html>
<head>
  <link rel="stylesheet" type="text/css" href="common.css">
  <title>冷奴 の時間割ジェネレータ</title>
  <h1>冷奴 の時間割ジェネレータ</h1>
</head>
<body>
  <!-- 未実装 -->
  <!-- <h2>テンプレート</h2>
  <p>シラバスリンク_授業ページリンク_教室</p>
  <p>授業形態_授業ページリンク1_授業ページリンク2</p> -->

  <h2>以前のJSONデータを使う</h2>
  <p>以前時間割を作成し、JSONを保存している場合は、それを下に貼ることで再利用できます．</p>
  <p>JSONを貼ったのち、「授業名とリンクの入力」の「時間割の構造設定を反映」ボタンを押してください．</p>
  <input type="text" name="pregeneratedJSON" placeholder="JSONを貼る">
  <button type="button" onclick="reflectJSON()">設定を反映</button>

  <h2>曜日</h2>
  <p>時間割に含める曜日すべてにチェックを入れてください．</p>
  <input type="checkbox" name="yobi" value="月" checked>月
  <br>
  <input type="checkbox" name="yobi" value="火" checked>火
  <br>
  <input type="checkbox" name="yobi" value="水" checked>水
  <br>
  <input type="checkbox" name="yobi" value="木" checked>木
  <br>
  <input type="checkbox" name="yobi" value="金" checked>金
  <br>
  <input type="checkbox" name="yobi" value="土">土
  <br>
  <input type="checkbox" name="yobi" value="日">日

  <h2>時間割</h2>
  <p>時間割の時限を10限まで選べます．選んだ時限に対して開講時間の範囲を入力してください．</p>
  <input type="checkbox" name="timeTable" value="1" onclick="timeTableClicked(1)" checked>1
  <span name='timeRange'>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09" selected>09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00" selected>00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10" selected>10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30" selected>30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="2" onclick="timeTableClicked(2)" checked>2
  <span name='timeRange'>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10" selected>10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40" selected>40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12" selected>12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10" selected>10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="3" onclick="timeTableClicked(3)" checked>3
  <span name='timeRange'>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13" selected>13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00" selected>00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14" selected>14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30" selected>30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="4" onclick="timeTableClicked(4)" checked>4
  <span name='timeRange'>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14" selected>14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40" selected>40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16" selected>16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10" selected>10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="5" onclick="timeTableClicked(5)" checked>5
  <span name='timeRange'>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16" selected>16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15" selected>15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16" selected>16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45" selected>45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="6" onclick="timeTableClicked(6)">6
  <span name='timeRange' hidden>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="7" onclick="timeTableClicked(7)">7
  <span name='timeRange' hidden>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="8" onclick="timeTableClicked(8)">8
  <span name='timeRange' hidden>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="9" onclick="timeTableClicked(9)">9
  <span name='timeRange' hidden>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>
  <br>
  <input type="checkbox" name="timeTable" value="10" onclick="timeTableClicked(10)">10
  <span name='timeRange' hidden>
    <select name="hourRangeSt">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeSt">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
    ~
    <select name="hourRangeEn">
      <option value="00">00</option>
      <option value="01">01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
      <option value="08">08</option>
      <option value="09">09</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
    </select>
    :
    <select name="minuteRangeEn">
      <option value="00">00</option>
      <option value="05">05</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
      <option value="55">55</option>
    </select>
  </span>

  <h2>フィールド設定</h2>
  <p>時間割に付与する情報を決められます．</p>
  <p>リンクを使いたい場合、「リンク有」にチェックを入れて「表示名」を入力することで、リンクのテキストを設定できます．</p>
  <div name="fieldItem">
    項目1
    <input type="checkbox" onClick="itemLinkChecked(1)">リンク有
    <input type="text" placeholder="表示名" hidden>
  </div>
  <div name="fieldItem">
    項目2
    <input type="checkbox" onClick="itemLinkChecked(2)">リンク有
    <input type="text" placeholder="表示名" hidden>
  </div>
  <div name="fieldItem">
    項目3
    <input type="checkbox" onClick="itemLinkChecked(3)">リンク有
    <input type="text" placeholder="表示名" hidden>
  </div>

  <h2>授業名とリンクの入力</h2>
  <p>曜日、時間割、フィールド設定の入力が終わったら、下の「時間割の構造設定を反映」ボタンを押してください．</p>
  <p>その後、各授業の名前や項目の値を入力してください．</p>
  <button type="button" onclick="shapeTimesheet()">時間割の構造設定を反映</button>
  <table border="1" name="timesheet">
  </table>

  <h2> テキストとして出力</h2>
  <p>各ボタンを押すと、対応する形式でフォームにデータが入ります．これをコピーして利用するなどしてください．</p>
  <button type="button" onClick="outputJSON()">JSONで出力</button>
  <input type="text" name="outputJSONForm">
  <br>
  <button type="button" onClick="outputHTML()">HTMLで出力</button>
  <input type="text" name="outputHTMLForm">

  <h2>新しいページで開く</h2>
  <p>各ボタンを押すと、対応する形式のデータが新しいページとして開かれます．これを保存するなどして利用してください．</p>
  <button type="button" onClick="openJSONPage()">JSONのページを開く</button>
  <br>
  <button type="button" onClick="openHTMLPage()">HTMLのページを開く</button>

  <h2>実装予定の機能</h2>
  <p>- 本ページで出力したJSONを入力することで、以前作成した時間割を復元、編集できる機能．</p>
  <p>- 時間割HTMLに背景画像を設定できる機能．</p>
  <p>- レイアウトやデザインの改善．</p>

  <h3>バグ報告、御要望、御助言は以下のTwitterアカウントまでお願いします．</h3>
  @coldTOUFU
</body>
<footer>
<a href="./index.html">ホーム</a>
</footer>
<script type="text/javascript">
  function removeChildren(node) {
    if(node.children === null) { return; }

    Array.from(node.children).forEach(function(c) { c.remove(); });
  }

  function filterChecked(nodes) {
    return Array.from(nodes).filter(n => n.checked);
  }

  function selectedOption(nodes) {
    selected = Array.from(nodes).filter(n => n.selected);
    if(selected.length === 0) { return null; }
    return selected[0];
  }

  function itemLinkChecked(n) {
    fieldItemNode = document.getElementsByName("fieldItem")[n-1];
    linkForm = fieldItemNode.querySelector("[type=text]");
    linkForm.hidden = ! linkForm.hidden;
  }

  function timeTableClicked(n) {
    clickedElem = document.getElementsByName("timeRange")[n-1];

    if(clickedElem.hidden) {
      for(i = 0; i < n; i++) {
        document.getElementsByName("timeTable")[i].checked = true;
        document.getElementsByName("timeRange")[i].hidden = false;
      }
    } else {
      for(i = n-1; i < 10; i++) {
        document.getElementsByName("timeTable")[i].checked = false;
        document.getElementsByName("timeRange")[i].hidden = true;
      }
    }
  }

  function timeRangeStr(node) {
    hourSt = selectedOption(node.querySelector('[name=hourRangeSt]').children).value;
    minSt = selectedOption(node.querySelector('[name=minuteRangeSt]').children).value;
    hourEn = selectedOption(node.querySelector('[name=hourRangeEn]').children).value;
    minEn = selectedOption(node.querySelector('[name=minuteRangeEn]').children).value;

    return hourSt + ":" + minSt + "~" + hourEn + ":" + minEn;
  }

  function timeRangeHTML(node) {
    hourSt = selectedOption(node.querySelector('[name=hourRangeSt]').children).value;
    minSt = selectedOption(node.querySelector('[name=minuteRangeSt]').children).value;
    hourEn = selectedOption(node.querySelector('[name=hourRangeEn]').children).value;
    minEn = selectedOption(node.querySelector('[name=minuteRangeEn]').children).value;

    return hourSt + ":" + minSt + "<br>" + hourEn + ":" + minEn;
  }

  function classFieldHTML(yobi, time) {
    classNameForm = "<input type='text' name='fieldName' placeholder='授業名'>";
    fieldItems = "";
    for(i = 0; i < 3; i++) {
      fieldItems += "<br>"
      node = document.getElementsByName("fieldItem")[i]
      if(node.querySelector("[type=checkbox]").checked) {
        fieldItems += "<input type='text' name='fieldLink' id=" + node.querySelector('[type=text]').value + " placeholder='" + node.querySelector("[type='text']").value + "のリンクURL'>"
      } else {
        fieldItems += "<input type='text' name='fieldText' placeholder='表示する文字'>"
      }
    }
    return "<div name='" + yobi + time + "'>" + classNameForm + fieldItems + "</div>";
  }

  function shapeTimesheet() {
    timesheet = document.getElementsByName("timesheet")[0];
    removeChildren(timesheet);

    yobiChecked = filterChecked(document.getElementsByName("yobi"));
    timeTableChecked = filterChecked(document.getElementsByName("timeTable"));

    /* ヘッダー(曜日の行)． */
    trHeader = document.createElement('tr');
    trHeader.appendChild(document.createElement('th')); // 左上の空白フィールド．
    yobiChecked.forEach(function(y) {
      th = document.createElement('th');
      th.textContent = y.value;
      trHeader.appendChild(th);
    });
    timesheet.appendChild(trHeader);

    /* 各行: 時限 + 各科目 */
    timeTableChecked.forEach(function(t) {
      tr = document.createElement('tr');

      /* 時限 */
      tdTime = document.createElement('td');
      tdTime.innerHTML = t.value + "<br>" + timeRangeHTML(t.nextElementSibling);
      tr.appendChild(tdTime);

      /* 各科目 */
      yobiChecked.forEach(function(y) {
        td = document.createElement('td');
        td.innerHTML = classFieldHTML(y.value, t.value);
        tr.appendChild(td);
      });
      timesheet.appendChild(tr);
    });
  }

  function itemJSON(node) {
    if(node.name === null) {// リンク無の場合．
      return node.value;
    }

    return { name: node.id, href: node.value };
  }

  function createJSONFromTimesheet() {
    json = [];

    yobiChecked = filterChecked(document.getElementsByName("yobi"));
    timeTableChecked = filterChecked(document.getElementsByName("timeTable"));
    yobiChecked.forEach(function(y) {
      yobi = y.value;
      yobiRow = [];

      timeTableChecked.forEach(function(t) {
        time = t.value;
        range = timeRangeStr(t.nextElementSibling);
        field = document.getElementsByName(yobi + time)[0]
        name = field.querySelector("[name='fieldName']").value;
        items = new Array(3);
        for(i = 0; i < 3; i++) {
          items[i] = itemJSON(field.children[(i+1)*2]);
        }
        yobiRow.push({
          time: time,
          range: range,
          classData: {
                       name: name,
                       items: items
                     }
        })
      })
      json.push({ yobi: yobi, classes: yobiRow})
    })

    return json;
  }

  function outputJSON() {
    document.getElementsByName("outputJSONForm")[0].value = JSON.stringify(createJSONFromTimesheet());
  }

  function openJSONPage() {
    var newWindow = window.open();
    newWindow.document.open();
    newWindow.document.write(JSON.stringify(createJSONFromTimesheet()));
    newWindow.document.close();
  }

  function classFieldOutputHTML(yobi, time) {
    html = ""
    targetField = document.getElementsByName(yobi+time)[0];

    html += "<p>" + targetField.querySelector("[name=fieldName]").value + "</p>";

    for(i = 0; i < 3; i++) {
      node = targetField.querySelectorAll("[type=text]")[i+1];
      if(node.name === "fieldText" || node.value === '') {// リンク無の場合か、リンクのURLが空の場合．
        html += "<p>" + node.value + "</p>";
      } else {
        html += "<a href='" + node.value + "'>" + node.id + "</a><br>";
      }
    }

    return html;
  }

  function createHTMLFromTimesheet() {
    html = ""

    yobiChecked = filterChecked(document.getElementsByName("yobi"));
    timeTableChecked = filterChecked(document.getElementsByName("timeTable"));

    /* ヘッダー(曜日の行) */
    html += "<table border='1'>"
    html += "<tr><th></th>" // 左端の空のフィールド、
    yobiChecked.forEach(function(y) {
      html += "<br><th>" + y.value + "</th>";
    })
    html += "</tr>"

    /* 各行: 時限 + 各科目 */
    timeTableChecked.forEach(function (t) {
      html += "<tr>";
      html += "<td>" + t.value + "<br>" + timeRangeHTML(t.nextElementSibling) + "</td>"
      yobiChecked.forEach(function (y){
        html += "<td>" + classFieldOutputHTML(y.value, t.value) + "</td>";
      })
      html += "</tr>"
    })

    return html;
  }

  function outputHTML() {
    document.getElementsByName("outputHTMLForm")[0].value = createHTMLFromTimesheet();
  }

  function openHTMLPage() {
    var newWindow = window.open();
    newWindow.document.open();
    newWindow.document.write(createHTMLFromTimesheet());
    newWindow.document.close();
  }

  var yobiToIndex = { "月": 0, "火": 1, "水": 2, "木": 3, "金": 4, "土": 5, "日": 6 }

  function reflectJSON() {
    json = JSON.parse(document.getElementsByName("pregeneratedJSON")[0].value);
    shapeTimesheet(); // 時間割表に値を入れるため、一旦時間割表を生成する．

    /* 曜日データを反映． */
    json.forEach(function(yobiColumn) {
      document.getElementsByName("yobi")[ yobiToIndex[yobiColumn["yobi"]] ].checked = true;
    })

    timeCount = 0; // 現在の時限のインデックス．
    /* 時限データを反映． */
    json[0]["classes"].forEach(function(fieldData) {
      rangeText = fieldData["range"];
      timeRangeNode = document.getElementsByName("timeRange")[timeCount];

      rangeSt = rangeText.slice(0,5);
      rangeEn = rangeText.slice(-5);
      timeRangeNode.querySelectorAll("[name=hourRangeSt] option")[parseInt(rangeSt.slice(0,2))].selected = true;
      timeRangeNode.querySelectorAll("[name=minuteRangeSt] option")[parseInt(rangeSt.slice(3,5))/5].selected = true;
      timeRangeNode.querySelectorAll("[name=hourRangeEn] option")[parseInt(rangeEn.slice(0,2))].selected = true;
      timeRangeNode.querySelectorAll("[name=minuteRangeEn] option")[parseInt(rangeEn.slice(3,5))/5].selected = true;

      document.getElementsByName("timeTable")[timeCount].checked = true;
      timeCount++;
    })

    json.forEach(function(yobiColumn) {
      yobiColumn["classes"].forEach(function(fieldData) {
        field = document.getElementsByName(yobiColumn["yobi"] + fieldData["time"])[0];
        for(i = 0; i < 3; i++) {
          if(typeof(fieldData["classData"]["items"][i]) === "string") {// リンク無の場合．
            field.querySelectorAll("[type='text']")[i+1].value = fieldData["classData"]["items"][i];
          } else {
            field.querySelectorAll("[type='text']")[i+1].value = fieldData["classData"]["items"][i]["href"];
          }
        }
      })
    })
  }
</script>
</html>
